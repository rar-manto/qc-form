<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form QC - CV. Kurnia Jaya</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'orange-primary': '#FF8C00',
                        'orange-secondary': '#FFA500',
                        'orange-light': '#FFE4B5'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 min-h-screen py-8">
    <!-- Login Screen -->
    <div id="loginScreen" class="min-h-screen flex items-center justify-center px-4">
        <div class="max-w-md w-full bg-white rounded-lg shadow-lg p-8">
            <div class="text-center mb-8">
                <div class="bg-gradient-to-r from-orange-primary to-orange-secondary text-white p-4 rounded-lg mb-4">
                    <h1 class="text-2xl font-bold">CV. Kurnia Jaya</h1>
                    <p class="text-orange-100">Quality Control System</p>
                </div>
                <h2 class="text-xl font-semibold text-gray-800">Login ke Sistem</h2>
            </div>
            
            <form id="loginForm" class="space-y-6">
                <div>
                    <label class="block text-gray-700 font-medium mb-2">Username</label>
                    <input type="text" id="username" required 
                           class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-primary focus:border-transparent">
                </div>
                <div>
                    <label class="block text-gray-700 font-medium mb-2">Password</label>
                    <input type="password" id="password" required 
                           class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-primary focus:border-transparent">
                </div>
                <button type="submit" 
                        class="w-full bg-gradient-to-r from-orange-primary to-orange-secondary hover:from-orange-600 hover:to-orange-700 text-white font-semibold py-3 rounded-lg transition-all duration-300">
                    Masuk
                </button>
                <div id="loginError" class="text-red-500 text-sm text-center hidden">
                    Username atau password salah!
                </div>
            </form>
            
            <div class="mt-6 p-4 bg-gray-50 rounded-lg">
                <p class="text-sm text-gray-600 font-medium mb-2">Demo Login:</p>
                <div class="grid grid-cols-2 gap-2 text-xs text-gray-500">
                    <div>
                        <p class="font-medium">Admin:</p>
                        <p>Username: admin</p>
                        <p>Password: qc2024</p>
                    </div>
                    <div>
                        <p class="font-medium">Supervisor:</p>
                        <p>Username: supervisor</p>
                        <p>Password: sv456</p>
                    </div>
                    <div>
                        <p class="font-medium">Operator 1:</p>
                        <p>Username: operator1</p>
                        <p>Password: op123</p>
                    </div>
                    <div>
                        <p class="font-medium">Operator 2:</p>
                        <p>Username: operator2</p>
                        <p>Password: op456</p>
                    </div>
                    <div>
                        <p class="font-medium">Operator 3:</p>
                        <p>Username: operator3</p>
                        <p>Password: op789</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Application (Hidden initially) -->
    <div id="mainApp" class="max-w-6xl mx-auto px-4" style="display: none;">
        <!-- Header -->
        <div class="bg-gradient-to-r from-orange-primary to-orange-secondary text-white p-6 rounded-t-lg shadow-lg">
            <div class="flex justify-between items-center">
                <div class="text-center flex-1">
                    <h1 class="text-2xl font-bold">Form Quality Control</h1>
                    <p class="text-orange-100 mt-2">CV. Kurnia Jaya</p>
                </div>
                <div class="text-right">
                    <p class="text-sm text-orange-100 mb-2"> <span id="currentUser">Admin</span></p>
                    <button onclick="logout()" 
                            class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg text-sm transition-colors">
                        Logout
                    </button>
                </div>
            </div>
        </div>

        <!-- Form Container -->
        <div class="bg-white shadow-lg rounded-b-lg p-6">
            <form id="qcForm" class="space-y-6">
                <!-- Basic Information -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Tanggal</label>
                        <input type="date" id="tanggal" name="tanggal" required 
                               class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-primary focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Nama Customer</label>
                        <input type="text" id="namaCustomer" name="namaCustomer" required 
                               class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-primary focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Nama Pelaksana</label>
                        <input type="text" id="pelaksana" name="pelaksana" required 
                               class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-primary focus:border-transparent">
                    </div>
                </div>

                <!-- Products Section -->
                <div class="border-t pt-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">Produk & Kemasan</h3>
                        <button type="button" id="addProduct" 
                                class="bg-orange-primary hover:bg-orange-600 text-white px-4 py-2 rounded-lg transition-colors">
                            + Tambah Produk
                        </button>
                    </div>
                    <div id="productsContainer">
                        <div class="product-item grid grid-cols-1 md:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg mb-4">
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">Nama Produk</label>
                                <input type="text" name="namaProduk[]" required 
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-primary focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">No Batch/Lot</label>
                                <input type="text" name="noBatch[]" 
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-primary focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">Jenis Kemasan</label>
                                <select name="jenisKemasan[]" required onchange="updateTotals()"
                                        class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-primary focus:border-transparent">
                                    <option value="">Pilih Kemasan</option>
                                    <option value="IBC">IBC</option>
                                    <option value="DRUM">Drum</option>
                                    <option value="JERIGEN">Jerigen</option>
                                    <option value="ZAK">Zak</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">Jumlah</label>
                                <input type="number" name="jumlahSpesifik[]" min="1" required placeholder="Isi jumlah" onchange="updateTotals()"
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-primary focus:border-transparent">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Total Packaging Section (Auto-calculated) -->
                <div class="border-t pt-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Total Jumlah Kemasan <span class="text-sm text-gray-500">(Otomatis)</span></h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Total IBC</label>
                            <input type="number" id="totalIbc" name="totalIbc" readonly 
                                   class="w-full p-3 border border-gray-300 rounded-lg bg-gray-100 text-gray-600">
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Total Drum</label>
                            <input type="number" id="totalDrum" name="totalDrum" readonly 
                                   class="w-full p-3 border border-gray-300 rounded-lg bg-gray-100 text-gray-600">
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Total Jerigen</label>
                            <input type="number" id="totalJerigen" name="totalJerigen" readonly 
                                   class="w-full p-3 border border-gray-300 rounded-lg bg-gray-100 text-gray-600">
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Total Zak</label>
                            <input type="number" id="totalZak" name="totalZak" readonly 
                                   class="w-full p-3 border border-gray-300 rounded-lg bg-gray-100 text-gray-600">
                        </div>
                    </div>
                </div>

                <!-- QC Parameters -->
                    <div class="border-t pt-6">
                      <h3 class="text-lg font-semibold text-gray-800 mb-4">Parameter QC</h3>
                      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                        <label class="flex items-center space-x-3 p-3 border border-gray-300 rounded-lg hover:bg-orange-50 cursor-pointer">
                          <input type="checkbox" name="packing" value="✓" class="w-5 h-5 text-orange-primary">
                          <span class="font-medium">Packing</span>
                        </label>
                        <label class="flex items-center space-x-3 p-3 border border-gray-300 rounded-lg hover:bg-orange-50 cursor-pointer">
                          <input type="checkbox" name="label" value="✓" class="w-5 h-5 text-orange-primary">
                          <span class="font-medium">Label</span>
                        </label>
                        <label class="flex items-center space-x-3 p-3 border border-gray-300 rounded-lg hover:bg-orange-50 cursor-pointer">
                          <input type="checkbox" name="cleaning" value="✓" class="w-5 h-5 text-orange-primary">
                          <span class="font-medium">Cleaning</span>
                        </label>
                        <label class="flex items-center space-x-3 p-3 border border-gray-300 rounded-lg hover:bg-orange-50 cursor-pointer">
                          <input type="checkbox" name="sj" value="✓" class="w-5 h-5 text-orange-primary">
                          <span class="font-medium">Surat Jalan</span>
                        </label>
                      </div>
                    </div>
                                        
                    <!-- Bottom Row: Sampling and Submit -->
                    <div class="flex justify-between items-end">
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Jumlah Sampling</label>
                            <input type="number" name="sampling" min="0" placeholder="0" 
                                   class="w-32 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-primary focus:border-transparent">
                        </div>
                        <button type="submit" id="submitBtn"
                                class="bg-gradient-to-r from-orange-primary to-orange-secondary hover:from-orange-600 hover:to-orange-700 text-white font-semibold py-3 px-8 rounded-lg transition-all duration-300 transform hover:scale-105">
                            Kirim Data QC
                        </button>
                    </div>
                </div>
            </form>
        </div>

        <!-- Daily Summary -->
        <div class="mt-8 bg-white shadow-lg rounded-lg p-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">Rekapan Pengiriman Hari Ini</h3>
            <div id="dailySummary" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="bg-orange-50 p-4 rounded-lg text-center">
                    <div class="text-2xl font-bold text-orange-primary" id="ibcCount">0</div>
                    <div class="text-gray-600">IBC</div>
                </div>
                <div class="bg-orange-50 p-4 rounded-lg text-center">
                    <div class="text-2xl font-bold text-orange-primary" id="drumCount">0</div>
                    <div class="text-gray-600">Drum</div>
                </div>
                <div class="bg-orange-50 p-4 rounded-lg text-center">
                    <div class="text-2xl font-bold text-orange-primary" id="jerigenCount">0</div>
                    <div class="text-gray-600">Jerigen</div>
                </div>
                <div class="bg-orange-50 p-4 rounded-lg text-center">
                    <div class="text-2xl font-bold text-orange-primary" id="zakCount">0</div>
                    <div class="text-gray-600">Zak</div>
                </div>
            </div>
            <div class="mt-4 text-sm text-gray-500 text-center">
                Data akan direset setiap pergantian hari
            </div>
        </div>
    </div>

    <script>
        // Login credentials (Demo purposes - in production, use secure authentication)
        const validUsers = {
            'admin': { password: 'qc2024', name: 'Admin' },
            'operator1': { password: 'op123', name: 'Operator 1' },
            'operator2': { password: 'op456', name: 'Operator 2' },
            'operator3': { password: 'op789', name: 'Operator 3' },
            'supervisor': { password: 'sv456', name: 'Supervisor' }
        };

        // Check if user is already logged in
        function checkLoginStatus() {
            const loggedInUser = localStorage.getItem('loggedInUser');
            if (loggedInUser) {
                const userData = JSON.parse(loggedInUser);
                showMainApp(userData);
            }
        }

        // Login form handler
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const errorDiv = document.getElementById('loginError');
            
            if (validUsers[username] && validUsers[username].password === password) {
                const userData = {
                    username: username,
                    name: validUsers[username].name,
                    loginTime: new Date().toISOString()
                };
                
                // Store login session
                localStorage.setItem('loggedInUser', JSON.stringify(userData));
                
                // Show main app
                showMainApp(userData);
                errorDiv.classList.add('hidden');
            } else {
                errorDiv.classList.remove('hidden');
                document.getElementById('password').value = '';
            }
        });

        // Show main application
        function showMainApp(userData) {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('mainApp').style.display = 'block';
            document.getElementById('currentUser').textContent = userData.name;
            
            // Initialize app
            initializeApp();
        }

        // Logout function
        function logout() {
            localStorage.removeItem('loggedInUser');
            document.getElementById('loginScreen').style.display = 'flex';
            document.getElementById('mainApp').style.display = 'none';
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
        }

        // Initialize main application
        function initializeApp() {
            // Set today's date as default
            document.getElementById('tanggal').valueAsDate = new Date();
            
            // Initialize totals calculation
            updateTotals();
            
            // Initialize daily summary
            updateDailySummary();
        }

        // Update totals automatically
        function updateTotals() {
            const jenisKemasanInputs = document.querySelectorAll('select[name="jenisKemasan[]"]');
            const jumlahInputs = document.querySelectorAll('input[name="jumlahSpesifik[]"]');
            
            const totals = {
                IBC: 0,
                DRUM: 0,
                JERIGEN: 0,
                ZAK: 0
            };
            
            for (let i = 0; i < jenisKemasanInputs.length; i++) {
                const kemasan = jenisKemasanInputs[i].value;
                const jumlah = parseInt(jumlahInputs[i].value) || 0;
                
                if (kemasan && totals.hasOwnProperty(kemasan)) {
                    totals[kemasan] += jumlah;
                }
            }
            
            document.getElementById('totalIbc').value = totals.IBC;
            document.getElementById('totalDrum').value = totals.DRUM;
            document.getElementById('totalJerigen').value = totals.JERIGEN;
            document.getElementById('totalZak').value = totals.ZAK;
        }

        // Add product functionality
        document.getElementById('addProduct').addEventListener('click', function() {
            const container = document.getElementById('productsContainer');
            const newProduct = document.createElement('div');
            newProduct.className = 'product-item grid grid-cols-1 md:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg mb-4';
            newProduct.innerHTML = `
                <div>
                    <label class="block text-gray-700 font-medium mb-2">Nama Produk</label>
                    <input type="text" name="namaProduk[]" required 
                           class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-primary focus:border-transparent">
                </div>
                <div>
                    <label class="block text-gray-700 font-medium mb-2">No Batch/Lot</label>
                    <input type="text" name="noBatch[]" 
                           class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-primary focus:border-transparent">
                </div>
                <div>
                    <label class="block text-gray-700 font-medium mb-2">Jenis Kemasan</label>
                    <select name="jenisKemasan[]" required onchange="updateTotals()"
                            class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-primary focus:border-transparent">
                        <option value="">Pilih Kemasan</option>
                        <option value="IBC">IBC</option>
                        <option value="DRUM">Drum</option>
                        <option value="JERIGEN">Jerigen</option>
                        <option value="ZAK">Zak</option>
                    </select>
                </div>
                <div class="flex items-end gap-2">
                    <div class="flex-1">
                        <label class="block text-gray-700 font-medium mb-2">Jumlah</label>
                        <input type="number" name="jumlahSpesifik[]" min="1" required placeholder="Isi jumlah" onchange="updateTotals()"
                               class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-primary focus:border-transparent">
                    </div>
                    <button type="button" onclick="this.parentElement.parentElement.remove(); updateTotals();" 
                            class="bg-red-500 hover:bg-red-600 text-white px-3 py-3 rounded-lg transition-colors">
                        ✕
                    </button>
                </div>
            `;
            container.appendChild(newProduct);
        });

        // Daily summary management
        function updateDailySummary() {
            const today = new Date().toDateString();
            let summary = JSON.parse(localStorage.getItem('dailySummary') || '{}');
            
            // Reset if different day
            if (summary.date !== today) {
                summary = { date: today, IBC: 0, DRUM: 0, JERIGEN: 0, ZAK: 0 };
                localStorage.setItem('dailySummary', JSON.stringify(summary));
            }
            
            // Update display
            document.getElementById('ibcCount').textContent = summary.IBC || 0;
            document.getElementById('drumCount').textContent = summary.DRUM || 0;
            document.getElementById('jerigenCount').textContent = summary.JERIGEN || 0;
            document.getElementById('zakCount').textContent = summary.ZAK || 0;
        }

        // Form submission
        document.getElementById('qcForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Mengirim...';
            submitBtn.disabled = true;
            
            try {
                const formData = new FormData(this);
                
                // Get current user info
                const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));
                
                // Get product arrays
                const namaProdukArray = formData.getAll('namaProduk[]');
                const noBatchArray = formData.getAll('noBatch[]');
                const jenisKemasanArray = formData.getAll('jenisKemasan[]');
                const jumlahSpesifikArray = formData.getAll('jumlahSpesifik[]');
                
                // Send each product as separate row
                for (let i = 0; i < namaProdukArray.length; i++) {
                    const kemasan = jenisKemasanArray[i];
                    const jumlah = parseInt(jumlahSpesifikArray[i]) || 0;
                    
                    const dataToSend = new URLSearchParams();
                    dataToSend.append('NAMA COSTUMER', formData.get('namaCustomer') || '');
                    dataToSend.append('NAMA PRODUK', namaProdukArray[i] || '');
                    dataToSend.append('NO BATCH/LOT', noBatchArray[i] || '');
                    dataToSend.append('JENIS KEMASAN', kemasan || '');
                    dataToSend.append('JUMLAH KEMASAN', jumlah.toString());
                    dataToSend.append('IBC', kemasan === 'IBC' ? jumlah.toString() : '0');
                    dataToSend.append('DRUM', kemasan === 'DRUM' ? jumlah.toString() : '0');
                    dataToSend.append('JERIGEN', kemasan === 'JERIGEN' ? jumlah.toString() : '0');
                    dataToSend.append('ZAK', kemasan === 'ZAK' ? jumlah.toString() : '0');
                    dataToSend.append('PACKING', formData.get('packing') || '');
                    dataToSend.append('LABEL', formData.get('label') || '');
                    dataToSend.append('CLEANING', formData.get('cleaning') || '');
                    dataToSend.append('SJ', formData.get('sj') || '');
                    dataToSend.append('SAMPLING', formData.get('sampling') || '0');
                    dataToSend.append('PELAKSANA', formData.get('pelaksana') || '');
                    dataToSend.append('TANGGAL', formData.get('tanggal') || '');
                    dataToSend.append('USER_LOGIN', loggedInUser ? loggedInUser.name : 'Unknown');
                    
                    // Send to Google Sheets
                    await fetch('https://script.google.com/macros/s/AKfycbwn546Wcan018gxX-8ZJT2VU-_RnNTe5s4xjsyNeOdF9z2X8nkXuWqJfKlwz7TNMgx9/exec', {
                        method: 'POST',
                        mode: 'no-cors',
                        headers: {
                            'Content-Type': 'application/x-www-form-urlencoded',
                        },
                        body: dataToSend.toString()
                    });
                    
                    // Small delay between requests
                    await new Promise(resolve => setTimeout(resolve, 100));
                }
                
                // Update daily summary using totals
                const today = new Date().toDateString();
                let summary = JSON.parse(localStorage.getItem('dailySummary') || '{}');
                if (summary.date !== today) {
                    summary = { date: today, IBC: 0, DRUM: 0, JERIGEN: 0, ZAK: 0 };
                }
                
                // Add current totals to daily summary
                async function updateDailySummary() {
                try {
                    const response = await fetch("https://script.google.com/macros/s/AKfycbwn546Wcan018gxX-8ZJT2VU-_RnNTe5s4xjsyNeOdF9z2X8nkXuWqJfKlwz7TNMgx9/exec");
                    const summary = await response.json();

                    document.getElementById('ibcCount').textContent = summary.IBC || 0;
                    document.getElementById('drumCount').textContent = summary.DRUM || 0;
                    document.getElementById('jerigenCount').textContent = summary.JERIGEN || 0;
                    document.getElementById('zakCount').textContent = summary.ZAK || 0;
                } catch (error) {
                    console.error("Gagal ambil rekap harian:", error);
                }
            }

// Panggil saat halaman load
updateDailySummary();
                
                // Reset form
                this.reset();
                document.getElementById('tanggal').valueAsDate = new Date();
                
                // Reset products to single item
                const container = document.getElementById('productsContainer');
                container.innerHTML = `
                    <div class="product-item grid grid-cols-1 md:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg mb-4">
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Nama Produk</label>
                            <input type="text" name="namaProduk[]" required 
                                   class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-primary focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">No Batch/Lot</label>
                            <input type="text" name="noBatch[]" 
                                   class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-primary focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Jenis Kemasan</label>
                            <select name="jenisKemasan[]" required onchange="updateTotals()"
                                    class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-primary focus:border-transparent">
                                <option value="">Pilih Kemasan</option>
                                <option value="IBC">IBC</option>
                                <option value="DRUM">Drum</option>
                                <option value="JERIGEN">Jerigen</option>
                                <option value="ZAK">Zak</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Jumlah</label>
                            <input type="number" name="jumlahSpesifik[]" min="1" required placeholder="Isi jumlah" onchange="updateTotals()"
                                   class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-primary focus:border-transparent">
                        </div>
                    </div>
                `;
                
                // Reset totals
                updateTotals();
                
                alert('✅ Data QC berhasil dikirim ke Google Sheets!');
                
            } catch (error) {
                console.error('Error:', error);
                alert('❌ Terjadi kesalahan saat mengirim data. Silakan coba lagi.');
            } finally {
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            }
        });
 
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            checkLoginStatus();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97826ed91654f8c4',t:'MTc1NjcwNTIyOC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>




