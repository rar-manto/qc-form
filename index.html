<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Form QC - CV. Kurnia Jaya</title>
<script src="https://cdn.tailwindcss.com"></script>
<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        'orange-primary': '#FF8C00',
        'orange-secondary': '#FFA500'
      }
    }
  }
}
</script>
</head>

<body class="bg-gray-50 min-h-screen py-8">

<!-- LOGIN -->
<div id="loginScreen" class="min-h-screen flex items-center justify-center px-4">
  <div class="max-w-md w-full bg-white rounded-lg shadow-lg p-8">
    <div class="text-center mb-6">
      <h1 class="text-2xl font-bold">CV. Kurnia Jaya</h1>
      <p>Quality Control System</p>
    </div>

    <form id="loginForm" class="space-y-4">
      <input id="username" placeholder="Username" class="w-full p-3 border rounded">
      <input id="password" type="password" placeholder="Password" class="w-full p-3 border rounded">
      <button class="w-full bg-orange-primary text-white py-3 rounded">Login</button>
      <div id="loginError" class="text-red-500 text-sm hidden">Login gagal</div>
    </form>
  </div>
</div>

<!-- MAIN -->
<div id="mainApp" class="max-w-6xl mx-auto px-4 hidden">

<div class="bg-orange-primary text-white p-6 rounded-t-lg">
  <div class="flex justify-between">
    <div>
      <h1 class="text-2xl font-bold">Form Quality Control</h1>
      <p>CV. Kurnia Jaya</p>
    </div>
    <div>
      <span id="currentUser"></span>
      <button onclick="logout()" class="ml-4 bg-orange-secondary px-3 py-2 rounded">Logout</button>
    </div>
  </div>
</div>

<div class="bg-white p-6 rounded-b-lg shadow">
<form id="qcForm" class="space-y-6">

<div class="grid md:grid-cols-3 gap-4">
  <input type="date" name="tanggal" id="tanggal" class="p-3 border rounded">
  <input type="text" name="namaCustomer" placeholder="Nama Customer" class="p-3 border rounded">
  <input type="text" name="pelaksana" placeholder="Pelaksana" class="p-3 border rounded">
</div>

<div>
<button type="button" id="addProduct" class="bg-orange-primary text-white px-4 py-2 rounded">+ Tambah Produk</button>
<div id="productsContainer" class="mt-4"></div>
</div>

<div class="grid md:grid-cols-4 gap-4">
<input readonly id="totalIbc" class="p-3 border bg-gray-100" placeholder="IBC">
<input readonly id="totalDrum" class="p-3 border bg-gray-100" placeholder="DRUM">
<input readonly id="totalJerigen" class="p-3 border bg-gray-100" placeholder="JERIGEN">
<input readonly id="totalZak" class="p-3 border bg-gray-100" placeholder="ZAK">
</div>

<div class="grid md:grid-cols-4 gap-4">
<label><input type="checkbox" name="packing" value="✓"> Packing</label>
<label><input type="checkbox" name="label" value="✓"> Label</label>
<label><input type="checkbox" name="cleaning" value="✓"> Cleaning</label>
<label><input type="checkbox" name="sj" value="✓"> SJ</label>
</div>

<div class="flex justify-between">
<input type="number" name="sampling" placeholder="Sampling" class="p-3 border rounded w-32">
<button class="bg-orange-primary text-white px-6 py-3 rounded">Kirim</button>
</div>

</form>
</div>

<!-- REKAP -->
<div class="mt-6 bg-white p-6 rounded shadow">
<h3 class="font-bold mb-4">Rekap Hari Ini</h3>
<div class="grid grid-cols-4 gap-4 text-center">
<div><div id="ibcCount">0</div>IBC</div>
<div><div id="drumCount">0</div>DRUM</div>
<div><div id="jerigenCount">0</div>JERIGEN</div>
<div><div id="zakCount">0</div>ZAK</div>
</div>
</div>

</div>

<script>
const GAS_URL = "https://script.google.com/macros/s/AKfycbzYJwYT3hocplI8NWiWwTzO_S_Fih_aeSQEsQNxFamzVEwivP4ovP-vM-gFdW_pR0QR/exec";

const users = {
  admin:{password:'qc2024',name:'Admin'},
  operator1:{password:'op123',name:'Operator 1'}
};

document.getElementById('loginForm').onsubmit = e=>{
  e.preventDefault();
  const u=username.value,p=password.value;
  if(users[u]&&users[u].password===p){
    localStorage.user=JSON.stringify({name:users[u].name});
    loginScreen.classList.add('hidden');
    mainApp.classList.remove('hidden');
    currentUser.textContent=users[u].name;
    loadSummary();
  } else loginError.classList.remove('hidden');
};

function logout(){
  localStorage.clear();
  location.reload();
}

async function loadSummary(){
  const r = await fetch(GAS_URL);
  const d = await r.json();
  ibcCount.textContent=d.IBC||0;
  drumCount.textContent=d.DRUM||0;
  jerigenCount.textContent=d.JERIGEN||0;
  zakCount.textContent=d.ZAK||0;
}

loadSummary();
</script>

</body>
</html>


